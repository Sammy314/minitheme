<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>邛崃改革开放40年</title>
  <!-- hotcss.js 适配方案，CSS加载之前引入 -->
  <meta name="hotcss" content="initial-dpr=1,max-width=750">
  <script type="text/javascript">
    (function(window,document){var hotcss={};(function(){var viewportEl=document.querySelector('meta[name="viewport"]'),hotcssEl=document.querySelector('meta[name="hotcss"]'),dpr=window.devicePixelRatio||1,maxWidth=768,designWidth=0;dpr=dpr>=3?3:(dpr>=2?2:1);if(hotcssEl){var hotcssCon=hotcssEl.getAttribute("content");if(hotcssCon){var initialDprMatch=hotcssCon.match(/initial\-dpr=([\d\.]+)/);if(initialDprMatch){dpr=parseFloat(initialDprMatch[1])}var maxWidthMatch=hotcssCon.match(/max\-width=([\d\.]+)/);if(maxWidthMatch){maxWidth=parseFloat(maxWidthMatch[1])}var designWidthMatch=hotcssCon.match(/design\-width=([\d\.]+)/);if(designWidthMatch){designWidth=parseFloat(designWidthMatch[1])}}}document.documentElement.setAttribute("data-dpr",dpr);hotcss.dpr=dpr;document.documentElement.setAttribute("max-width",maxWidth);hotcss.maxWidth=maxWidth;if(designWidth){document.documentElement.setAttribute("design-width",designWidth)}hotcss.designWidth=designWidth;var scale=1/dpr,content="width=device-width, initial-scale="+scale+", minimum-scale="+scale+", maximum-scale="+scale+", user-scalable=no,viewport-fit=cover";if(viewportEl){viewportEl.setAttribute("content",content)}else{viewportEl=document.createElement("meta");viewportEl.setAttribute("name","viewport");viewportEl.setAttribute("content",content);document.head.appendChild(viewportEl)}})();hotcss.px2rem=function(px,designWidth){if(!designWidth){designWidth=parseInt(hotcss.designWidth,10)}return parseInt(px,10)*320/designWidth/20};hotcss.rem2px=function(rem,designWidth){if(!designWidth){designWidth=parseInt(hotcss.designWidth,10)}return rem*20*designWidth/320};hotcss.mresize=function(){var innerWidth=document.documentElement.getBoundingClientRect().width||window.innerWidth;if(hotcss.maxWidth&&(innerWidth/hotcss.dpr>hotcss.maxWidth)){innerWidth=hotcss.maxWidth*hotcss.dpr}if(!innerWidth){return false}document.documentElement.style.fontSize=(innerWidth*20/320)+"px";hotcss.callback&&hotcss.callback()};hotcss.mresize();window.addEventListener("resize",function(){clearTimeout(hotcss.tid);hotcss.tid=setTimeout(hotcss.mresize,33)},false);window.addEventListener("load",hotcss.mresize,false);setTimeout(function(){hotcss.mresize()},333);window.hotcss=hotcss})(window,document);
  </script>
  <link rel="stylesheet" href="./animate.min.css">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .animated{
      animation-duration: 3s;
    }
    .pic-delay{
      animation: delay 2s;
      animation-delay: 3s;
    }
    @keyframes delay {
      50% {
        opacity: 0;
      }
      100% {
        opacity: 1;
        z-index: -1;
      }
    }
  </style>
</head>
<body>
  <div class="page-container">
      <audio id="musicAudio" autoplay="true" loop="loop" preload="true">
        <source src="music.mp3" type="audio/mpeg">
      </audio>
    <div class="gif">
      <!-- <div class="clock">
        <img src="img/clock.gif">
      </div> -->
      <!-- <div class="clock">
        <img src="img/hour.png" class="hour">
        <img src="img/min.png" class="min">
        <img src="img/sec.png" class="sec">
      </div>
      <div id="year">2018</div> -->
      <div class="tip">时光隧道开启中...</div>
    </div>
    <div class="canvas-wrap">
      <canvas id="html5_3d_animation"></canvas>
      <div id="show"></div>
    </div>
    <div class="bg-pic">时光隧道开启中...</div>
  </div>
</body>
<script src="jquery-1.8.3.min.js"></script>
<script src="html5_3d_animation.js" type="text/javascript"></script>
<script src="index.js"></script>
<script typet="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
$(function() {
  $("#html5_3d_animation").html5_3d_animation({
    window_width: '500',
    window_height: '800',
    window_background: '#00113F',
    star_count: '1000',
    star_color: '#FBFFAF',
    star_depth: '100'
  });
});
// wx.ready(function(){
//   // document.getElementById("musicAudio").setAttribute('src', 'music.mp3');
//   document.getElementById("musicAudio").play();
// });
// 音乐自动播放
function audioAutoPlay(id){
    var audio = document.getElementById(id);
    play = function(){
        audio.play();
        document.removeEventListener("touchstart",play, false);
    };
    audio.play();
    // 获取微信初始化完成
    document.addEventListener("WeixinJSBridgeReady", function () {
        play();
    }, false);
 
    // 易信
    document.addEventListener('YixinJSBridgeReady', function() {
        play();
    }, false);
 
    // 手机触碰屏幕
    document.addEventListener("touchstart",play, false);
}
audioAutoPlay('musicAudio');
// var num = 2018;
// var t = setInterval(function(){
//   num--;
//   document.getElementById("year").innerText = num;
//   if (num == 1978) {
//     clearInterval(t);
//   }
// },200)
</script>
</html>